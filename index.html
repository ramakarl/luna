<html>

  <meta charset='utf-8'>

  <head>

    <!-- <link href="css/simple.css" rel="stylesheet" type="text/css" /> -->

    <script src='lib/jquery.js'></script>
    <script src='lib/jquery.mousewheel.js'/></script>
    <script src='lib/jquery.capslockstate.js'/></script>
    <script src='lib/numeric.js'></script>
    <script src='lib/oop.js'></script>

    <script src='gui/guiRegion.js'></script>
    <script src='gui/guiPalette.js'></script>
    <script src='gui/guiComponentTile.js'></script>
    <script src='gui/guiList.js'></script>
    <script src='gui/guiScrollbar.js'></script>
    <script src='gui/guiIcon.js'></script>
    <script src='gui/guiDropIcon.js'></script>
    <script src='gui/guiToolbox.js'></script>
    <script src='gui/guiGrid.js'></script>
    <script src='gui/guiTextbox.js'></script>
    <script src='gui/guiAction.js'></script>

    <script src='tools/toolNav.js'></script>

    <script src='luna_render.js'></script>

    <script>

    var drawing = true,
    running = true,
    mouseDown = false,
    visible = true;

    var msec = 0;
    var frame = 0;
    var lastTime = new Date();

    var g_painter = null;
      var g_canvas = "canvas";
    var g_context = null;
    var g_nav = new toolNav();

    function loop() {

    frame = frame + 1;
    if ( frame >= 30 ) {
      var d = new Date();
      msec = (d.getTime() - lastTime ) / frame;
      lastTime = d;
      frame = 0;
    }
    var container = document.querySelector( 'section' );
    container.innerHTML = "FPS: " + (1000.0/msec);

    g_painter.drawGrid();

    requestAnimationFrame( loop, 1 );
    }

      $(document).ready( function() {
        console.log("ready");

        var cvs = document.getElementById('canvas');
        cvs.onselectstart = function() { return false; }

    g_painter = new lunaRender( "canvas" );

    requestAnimationFrame( loop, 1 );
      });

    if ( !window.requestAnimationFrame ) {
      window.requestAnimationFrame = ( function() {

      return window.webkitRequestAnimationFrame ||
      window.mozRequestAnimationFrame ||
      window.oRequestAnimationFrame ||
      window.msRequestAnimationFrame ||
      function( callback, element ) {
        window.setTimeout( callback, 1000 );
      };

      } )();
    }


    </script>
  </head>

  <body>

    <!-- download hacking -->
    <iframe id='downloadFrame' style='display:none'></iframe>
    <canvas id='canvas' width='1200' height='700' style='border:1px solid #111;' tabindex='0'> </canvas>
    <section></section>
    <button id='btn' onclick='btn_func();' >f</button>

  </body>

</html>
